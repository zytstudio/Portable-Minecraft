# Portable Minecraft - 我的世界绿色版制作教程

## 前言

​	因为本人学校信息课的内容比较无聊，而且本人已经掌握了信息课课内的知识，所以本人上信息课就没什么事情干，基本都在玩`Minecraft`。

​	由于学校电脑上没有`Java`环境，而且系统里有还原卡，无法轻易修改系统文件，我以前每次信息课都要先下载`Java`。

​	是于是便想到：能不能放一个绿色版的`Java`在U盘里，每次插上直接用呢？

​	本篇文章/视频将带来将`Java`和`Minecraft`做成绿色版，放到U盘里随身携带的教程。

## 版权与免责声明

​	**本教程仅供学习交流使用，请勿用于任何不正当用途。本教程无任何政治倾向，教程内资料均来源于网络，下载内容完全免费。对于本教程提供的有版权的软件，请在下载后24小时内删除。请学生在通过老师和家长同意后再进行操作。对于参照本教程操作所造成的任何软件、硬件损坏以及财产损失，本人概不负责。本教程为本人原创，本教程的文字版本仅在`Github`、`bilibili`以及`blog.zytstudio.top`发布，视频版本仅在`bilibili`、`AcFun`和`YouTube`发布，请勿转载。在其他平台看到的本教程均非本人发布。教程内容如有侵权，请联系本人进行删改。**

​	**本作品采用 知识共享署名 4.0 国际许可协议 进行许可。**

## 本次方案相较上一版方案的改进

​	上一次本人已经介绍了利用`Portable Apps`平台和`JPortable`软件来实现的方法。本方法主要解决了该方法的三大问题。

​	第一，路径设置繁琐。由于`JPortable`的启动机制，程序的当前文件夹与程序所在的文件夹不是同一个，这导致了要手动设置目录位置，十分繁琐。这也导致了该方法依赖于`HMCL`启动器的`相对路径`选项。

​	第二，该方法只适用于`.jar`格式的启动器，无法运行`.exe`文件，这也导致该方法的启动器有很大的局限性。

​	第三，该方法中本人安装的是`JDK 8`，而高版本`Minecraft`依赖于`Java 17`或更高版本，故该方法无法支持高版本`Minecraft`。其实也可以安装`JPortable`所对应的`Java`版本，但是只能安装一个，即使安装了`Java 17`，也无法与`Java 8`共存。因此，该版本兼容性欠佳。

​	而本方法解决了以上三个问题，而且不依赖于`Portable Apps`平台和`JPortable`软件，启动速度也有所提高。

## 正文

### 准备工作

#### 硬件准备

​	准备一个安装了`Windows 7`以上（含`Windows 7`）系统的电脑、一个**高速**U盘或者移动硬盘 **（最好不要用普通U盘或者内存卡）**。

#### 检查目标系统

​	目标系统（一般是学校电脑的系统）版本需要在`Windows 7`以上（含`Windows 7`）。

#### 查看目标系统架构

​	在`此电脑`（在`Windows 7`和`Windows 8.x`上是`计算机`）图标上右键，点击`属性`。在`系统类型`一栏中，若显示`64 位操作系统`，则目标系统架构为`amd64`，在下载软件时，应下载带有`x64`、`x86-64`或`amd64`的版本；若显示`32 位操作系统`，则目标系统架构为`x86`，在下载软件时，应下载带有`x86`、`ia32`或`i*86`的版本。

### 下载并解压Java环境

​	新建一个文件夹并命名（最好不要有空格或中文）。本文/视频以该文件夹名称为`MC`为例。将该文件夹放在U盘或移动硬盘内。

​	下载下方链接中提供的对应版本的`JRE`或`JDK`（请下载压缩文件/`Compressed Archive`版本）并分别解压。以`7-zip`解压软件为例，右键该文件，将鼠标放到右键菜单中的`7-zip`选项上，点击`提取到当前位置`即可。每个版本解压出来后只得到一个文件夹，且该文件夹内不止有一个文件/文件夹。解压完成后，下载的`JRE`与`JDK`压缩包可以删除。

​	将得到的文件夹都移动到`MC`文件夹的根目录中。

### 下载并解压启动器

​	下载启动器并参照`下载并解压Java环境`中的方法解压出启动器的可执行文件（通常为`.exe`或`.jar`）。也有一些启动器下载后就是可执行文件，则不用解压。将可执行文件放在`MC`文件夹的根目录中。

​	若启动器解压后除了可执行文件还有其他依赖，则将其他依赖一起移动到`MC`文件夹中，注意不可改变其他依赖文件与启动器可执行文件的相对路径。

​	右键该文件，点击`属性`，查看`文件类型`。若是`... (.exe)`，则启动器可执行文件扩展名为`.exe`；若是`... (.jar)`，则启动器可执行文件扩展名为`.jar`；若两者都不是，则很可能是下载或解压了错误的文件。

### 创建启动脚本

​	打开`记事本`。若只需要一个`Java`版本，则应输入以下内容：

```
@echo off
set Path=%Path%;%cd%\<Java文件夹的名称>\bin
```

​	若需要`n`个`Java`版本，则应输入以下内容：

```
@echo off
set Path=%Path%;%cd%\<第1个Java版本文件夹的名称>\bin;%cd%\<第2个Java版本文件夹的名称>\bin;%cd%\<第3个Java版本文件夹的名称>\bin; ... ;%cd%\<第n个Java版本文件夹的名称>\bin
```

​	**注意其中除文件和文件夹名外的符号均为英文半角字符。**

​	在文件末尾新建一行。若启动器可执行文件扩展名为`.exe`，则输入以下内容：

```
<启动器可执行文件名>.exe
```

​	若启动器可执行文件扩展名为`.jar`，则输入以下内容：

```
java -jar <可执行文件文件名>.jar
```

​	例如，若启动器可执行文件扩展名是`.exe`，启动器可执行文件名是`HMCL`；需要两个`Java`版本，且两个`Java`版本文件夹的名称分别为`jdk-17.0.7`和`jre1.8.0_361`，则应在记事本中输入以下内容：

```
@echo off
set Path=%Path%;%cd%\jdk-17.0.7\bin;%cd%\jre1.8.0_361\bin
HMCL.exe
```

​	输入完之后，点击记事本菜单栏的`文件`，点击`另存为`按钮，将保存类型改为`所有文件 (*.*)`。在上方打开`MC`文件夹，在`文件名`一栏中输入`Run.bat`，点击`保存`，然后关闭记事本。

### 检查配置

​	若配置正确，则该文件夹的目录结构如下：

```
MC
├── <启动器可执行文件>
├── Run.bat
├── <第1个Java版本>
│   ├── bin
│   └── ...
├── <第2个Java版本>
│   ├── bin
│   └── ...
└── ...
```

### 运行启动器

​	在双击`Run.bat`，启动器应正常启动。为了保险，建议在没有`Java`环境的电脑或虚拟机上测试并检查是否能正常打开。

​	若启动器无法正常启动，请检查目录结构和`Run.bat`内容是否正确。

## 注意事项

​	本教程需要一定的电脑使用经验。

​	启动器中的游戏目录最好设置为当前文件夹下的`.minecraft`。如果需要更改，请保证该文件夹与启动器在同一个盘符内，且需要在启动器中勾选`使用相对路径`。

​	在没有`Java`环境的电脑中测试只是为了确保`Java`环境配置正确，并不代表本方法的启动器不能再有`Java`环境的电脑上启动，本方法也不会破坏原系统的`Java`环境。

​	本教程中所有的`<>`中的内容都需要按照实际情况进行更改，请勿粘贴后不加修改直接保存。

​	若启动器或`Java`环境发生变动，则`Run.bat`也需要进行相应的改动才能正常运行。

​	如果不想手动配置，本教程也提供了配置好的压缩文件，解压后移动至U盘中即可使用。

​	对于`Java 8`，应该下载`JRE`；而其他版本的`Java`都应下载`JDK`。

​	除了`Java 8`外，官方没有提供其他版本`Java`的32位程序，但是可以在启动器中手动下载。

​	运行中可能出现命令行窗口（一般为黑色），请勿关闭该窗口。

​	该方法可能不支持`PCL2`，建议使用`HMCL`或`CMCL`。

​	若需要直接用命令行启动，或者启动器是`CMCL`，请更改`Run.bat`的最后一行。

## 相关文件下载链接

- 合集：[Index of /Portable-Minecraft/ (zytstudiobg.top)](http://zytstudiobg.top:8012/Portable-Minecraft/)
- JDK和JRE：[Java Downloads | Oracle 中国](https://www.oracle.com/cn/java/technologies/downloads/)
- HMCL启动器：[下载 - Hello Minecraft! Launcher (huangyuhui.net)](https://hmcl.huangyuhui.net/download/)
- CMCL启动器：[console-minecraft-launcher 发行版 - Gitee.com](https://gitee.com/MrShiehX/console-minecraft-launcher/releases)

## 参考资料

1. [下载 - Hello Minecraft! Launcher (huangyuhui.net)](https://hmcl.huangyuhui.net/download/)
2. [Bat命令——获取当前盘符、当前目录、上级目录 - 话·醉月 - 博客园 (cnblogs.com)](https://www.cnblogs.com/zuiyue_jing/p/10369094.html)
3. [怎么看电脑32位还是64位？4个简单方法！ - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/615521978)
4. [Windows使用cmd命令行中查看、修改、删除与添加环境变量 - springsnow - 博客园 (cnblogs.com)](https://www.cnblogs.com/springsnow/p/12610417.html)
5. [Java Archive | Oracle](https://www.oracle.com/java/technologies/downloads/archive/)
6. [console-minecraft-launcher: 一个在控制台上运行的 Minecraft Java 版的启动器 (gitee.com)](https://gitee.com/MrShiehX/console-minecraft-launcher)
7. [如何在信息课的电脑上玩mc【电脑使用技巧系列】_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1m5411j7BF/)
